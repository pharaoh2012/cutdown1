<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>炫酷倒计时动画</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id="time-difference">00:00</div>
    <div id="overall_progress">0/10</div>
    <!-- 移除原有的 ttsSwitch 按钮 -->
    <div class="countdown-container">
      <div class="countdown-circle">
        <div class="countdown-inner">
          <svg class="progress-ring" width="300" height="300">
            <defs>
              <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop
                  offset="0%"
                  style="stop-color: #ff6b6b; stop-opacity: 1"
                />
                <stop
                  offset="50%"
                  style="stop-color: #4ecdc4; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #45b7d1; stop-opacity: 1"
                />
              </linearGradient>
            </defs>
            <circle
              class="progress-ring-circle"
              cx="150"
              cy="150"
              r="150"
            ></circle>
          </svg>
          <div class="countdown-number" id="countdown"></div>
          <div class="particles" id="particles"></div>
        </div>
      </div>
      <div class="countdown-text" id="countdownText">倒计时进行中</div>
      <!-- 更新后的进度条结构 -->
      <div class="progress-container">
        <div class="progress-label">
          <span>当前阶段</span>
          <span id="rundownLabel">[1/3]</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="rundownProgress"></div>
        </div>
      </div>

      <div class="progress-container">
        <div class="progress-label">
          <span>总进度</span>
          <span id="roundLabel">[0/10]</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="roundProgress"></div>
        </div>
      </div>
      <button class="restart-btn show" id="restartBtn" onclick="restart()">
        重新开始
      </button>
      <div class="tts-switch-container">
        <label for="ttsCheckbox">是否语音播报</label>
        <input type="checkbox" id="ttsCheckbox" class="tts-checkbox">
      </div>
    </div>

    <script src="./index.js"></script>
    <script>
      if ('serviceWorker' in navigator && location.hostname !== '127.0.0.1') {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then((registration) => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch((error) => {
              console.log('Service Worker registration failed:', error);
            });
        });
      }
    </script>
  </body>
</html>
